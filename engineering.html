<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack Loader 的加载顺序 | 前端面试题</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="referrer" content="no-referrer">
    
    <link rel="preload" href="/Front-end-interview/assets/css/0.styles.8848344e.css" as="style"><link rel="preload" href="/Front-end-interview/assets/js/app.fdae9a04.js" as="script"><link rel="preload" href="/Front-end-interview/assets/js/2.2ef4b7ab.js" as="script"><link rel="preload" href="/Front-end-interview/assets/js/8.083d3bab.js" as="script"><link rel="prefetch" href="/Front-end-interview/assets/js/10.1936cde4.js"><link rel="prefetch" href="/Front-end-interview/assets/js/11.eb007c06.js"><link rel="prefetch" href="/Front-end-interview/assets/js/12.8bc73bd9.js"><link rel="prefetch" href="/Front-end-interview/assets/js/13.5b5be3d4.js"><link rel="prefetch" href="/Front-end-interview/assets/js/14.dd28f4e2.js"><link rel="prefetch" href="/Front-end-interview/assets/js/15.67908718.js"><link rel="prefetch" href="/Front-end-interview/assets/js/16.2b6e8ce7.js"><link rel="prefetch" href="/Front-end-interview/assets/js/17.c0560b94.js"><link rel="prefetch" href="/Front-end-interview/assets/js/18.879f6c33.js"><link rel="prefetch" href="/Front-end-interview/assets/js/19.35ca9314.js"><link rel="prefetch" href="/Front-end-interview/assets/js/20.8da81083.js"><link rel="prefetch" href="/Front-end-interview/assets/js/21.9c5e2e4f.js"><link rel="prefetch" href="/Front-end-interview/assets/js/22.79ace77f.js"><link rel="prefetch" href="/Front-end-interview/assets/js/3.895fa97e.js"><link rel="prefetch" href="/Front-end-interview/assets/js/4.99bb1ea4.js"><link rel="prefetch" href="/Front-end-interview/assets/js/5.c7ab20ec.js"><link rel="prefetch" href="/Front-end-interview/assets/js/6.b688de92.js"><link rel="prefetch" href="/Front-end-interview/assets/js/7.c4e3305b.js"><link rel="prefetch" href="/Front-end-interview/assets/js/9.97deec76.js">
    <link rel="stylesheet" href="/Front-end-interview/assets/css/0.styles.8848344e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Front-end-interview/" class="home-link router-link-active"><!----> <span class="site-name">前端面试题</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/Front-end-interview/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/Front-end-interview/js.html" class="sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#javascript-里的最大安全数是多少-为什么" class="sidebar-link">javascript 里的最大安全数是多少，为什么</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#为什么-0-1-0-2-与-0-3-不相等-如何解决" class="sidebar-link">为什么 0.1 + 0.2 与 0.3 不相等，如何解决</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#小数四舍五入问题" class="sidebar-link">小数四舍五入问题</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#commonjs-和-es6-的区别" class="sidebar-link">commonjs 和 es6 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#什么是循环依赖" class="sidebar-link">什么是循环依赖？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#session、cookie、token-和-jwt-的区别" class="sidebar-link">session、cookie、token 和 jwt 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#dom-事件触发流程" class="sidebar-link">DOM 事件触发流程</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#target-和-currenttarget-区别" class="sidebar-link">target 和 currentTarget 区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#什么是事件委托" class="sidebar-link">什么是事件委托</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#prototype-和-proto-的关系是什么" class="sidebar-link">prototype 和 __proto__ 的关系是什么</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#内存回收" class="sidebar-link">内存回收</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#对象浅拷贝和深拷贝有什么区别" class="sidebar-link">对象浅拷贝和深拷贝有什么区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#javascript-里的类型判断" class="sidebar-link">javascript 里的类型判断</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#javascript-有哪些数据类型" class="sidebar-link">javascript 有哪些数据类型</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#内置对象和函数" class="sidebar-link">内置对象和函数</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#cookie、localstorage、sessionstorage区别" class="sidebar-link">cookie、localStorage、sessionStorage区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#请简述-javascript-中的-this" class="sidebar-link">请简述 JavaScript 中的 this</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#window-onload-和-domcontentloaded-的区别" class="sidebar-link">window.onload 和 DOMContentLoaded 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#object-与-map-的区别" class="sidebar-link">Object 与 Map 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#为什么-weakmap-和-weakset-的键只能使用对象" class="sidebar-link">为什么 WeakMap 和 WeakSet 的键只能使用对象？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#javascript-事件循环" class="sidebar-link">javascript 事件循环</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#图解-dom-位置关系" class="sidebar-link">图解 DOM 位置关系</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#常见的位运算符有哪些-其计算规则是什么" class="sidebar-link">常见的位运算符有哪些？其计算规则是什么？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#escape-encodeuri-encodeuricomponent-的区别" class="sidebar-link">escape，encodeURI，encodeURIComponent 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#对象的遍历顺序" class="sidebar-link">对象的遍历顺序</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/js.html#iterator-和-for-of-循环" class="sidebar-link">Iterator 和 for...of 循环</a></li></ul></li><li><a href="/Front-end-interview/implement.html" class="sidebar-link">手写和实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#async-和-generator-的关系-如何使用-generator-实现-async" class="sidebar-link">async 和 Generator 的关系，如何使用 Generator 实现 async</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#实现-compose-函数" class="sidebar-link">实现 compose 函数</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#实现-new-操作符" class="sidebar-link">实现 new 操作符</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#使用-es5-和-es6-实现继承" class="sidebar-link">使用 ES5 和 ES6 实现继承</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#实现发布-订阅模式" class="sidebar-link">实现发布/订阅模式</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#如何实现一个可设置过期时间的-localstorage" class="sidebar-link">如何实现一个可设置过期时间的 localStorage</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#防抖和节流函数的原理和实现" class="sidebar-link">防抖和节流函数的原理和实现</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#函数柯里化的优点和实现" class="sidebar-link">函数柯里化的优点和实现</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#简易-promise-的实现" class="sidebar-link">简易 Promise 的实现</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/implement.html#promise-all-和-promise-allsettled-的实现" class="sidebar-link">Promise.All 和 Promise.AllSettled 的实现</a></li></ul></li><li><a href="/Front-end-interview/typescript.html" class="sidebar-link">TypeScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/typescript.html#type-和-interface-的相同点和不同点" class="sidebar-link">type 和 interface 的相同点和不同点</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/typescript.html#infer-的协变和逆变" class="sidebar-link">infer 的协变和逆变</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/typescript.html#设计一个泛型-接受一个对象类型-返回一个可选的-key-的对象类型-但不能是空对象" class="sidebar-link">设计一个泛型，接受一个对象类型，返回一个可选的 key 的对象类型，但不能是空对象</a></li></ul></li><li><a href="/Front-end-interview/css.html" class="sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#bem-命名规范" class="sidebar-link">BEM 命名规范</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#padding-top-和-margin-top-的百分比相对于什么-为什么" class="sidebar-link">padding-top 和 margin-top 的百分比相对于什么，为什么</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#文字和图片并排居中" class="sidebar-link">文字和图片并排居中</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#文本超出部分显示省略号" class="sidebar-link">文本超出部分显示省略号</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#什么是-bfc" class="sidebar-link">什么是 BFC</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#css-作用域隔离方法" class="sidebar-link">css 作用域隔离方法</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#聊聊伪类和伪元素-伪对象" class="sidebar-link">聊聊伪类和伪元素（伪对象）</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#flex-属性的默认值" class="sidebar-link">flex 属性的默认值</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#fixed-元素相对于什么定位" class="sidebar-link">fixed 元素相对于什么定位</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#有没有遇到过-z-index-小的反而在上层的情况" class="sidebar-link">有没有遇到过 z-index 小的反而在上层的情况？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/css.html#width-100-与-width-auto-的区别" class="sidebar-link">width:100% 与 width:auto 的区别</a></li></ul></li><li><a href="/Front-end-interview/html.html" class="sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/html.html#html5语义化" class="sidebar-link">HTML5语义化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/html.html#viewport" class="sidebar-link">viewport</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/html.html#src-和-href-的区别" class="sidebar-link">src 和 href 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/html.html#defer-和-async-的区别" class="sidebar-link">defer 和 async 的区别</a></li></ul></li><li><a href="/Front-end-interview/vue.html" class="sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-的生命周期有哪些" class="sidebar-link">Vue 的生命周期有哪些</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-响应式原理" class="sidebar-link">Vue 响应式原理</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue3-和-vue2-的区别" class="sidebar-link">Vue3 和 Vue2 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-和-react-的区别是什么" class="sidebar-link">Vue 和 React 的区别是什么</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-父子组件生命周期执行顺序" class="sidebar-link">Vue 父子组件生命周期执行顺序</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-router原理" class="sidebar-link">Vue-router原理</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vuex原理" class="sidebar-link">Vuex原理</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-中的-key-的作用" class="sidebar-link">Vue 中的 key 的作用</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#virtual-dom-的优势在哪里" class="sidebar-link">Virtual Dom 的优势在哪里</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue1-中的-documentfragement-有什么作用" class="sidebar-link">Vue1 中的 DocumentFragement 有什么作用</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-子组件-emit-后-props-会立刻更新吗-为什么" class="sidebar-link">Vue 子组件 $emit 后 props 会立刻更新吗？为什么</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-源码里的设计模式有哪些" class="sidebar-link">Vue 源码里的设计模式有哪些</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-虚拟-dom-diff-算法" class="sidebar-link">Vue 虚拟 DOM diff 算法</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue2-和-vue3-diff-算法的区别" class="sidebar-link">Vue2 和 Vue3 diff 算法的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/vue.html#vue-和-react-diff-算法的区别" class="sidebar-link">Vue 和 React diff 算法的区别</a></li></ul></li><li><a href="/Front-end-interview/react.html" class="sidebar-link">React</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#hooks-的出现解决了什么问题" class="sidebar-link">hooks 的出现解决了什么问题？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#react-的生命周期有哪些" class="sidebar-link">React 的生命周期有哪些？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#purecomponent-和-component-区别" class="sidebar-link">PureComponent 和 Component 区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#如何使用-context-上下文" class="sidebar-link">如何使用 Context 上下文</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#react-父组件调用子组件的方法" class="sidebar-link">React 父组件调用子组件的方法</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#react-组件更新流程" class="sidebar-link">React 组件更新流程</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/react.html#react-虚拟-dom-diff-算法" class="sidebar-link">React 虚拟 DOM diff 算法</a></li></ul></li><li><a href="/Front-end-interview/engineering.html" aria-current="page" class="active sidebar-link">工程化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#webpack-loader-的加载顺序" class="sidebar-link">webpack Loader 的加载顺序</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#webpack-中-hash、chunkhash、contenthash-有什么不同" class="sidebar-link">webpack 中 hash、chunkhash、contenthash 有什么不同？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#聊聊-webpack-的-tree-shaking" class="sidebar-link">聊聊 webpack 的 tree-shaking</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#webpack-的-sideeffects-字段应该怎么用" class="sidebar-link">webpack 的 sideEffects 字段应该怎么用</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#实现一个-webpack-loader-和-webpack-plugin" class="sidebar-link">实现一个 webpack loader 和 webpack plugin</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#webpack-打包后代码里的-esmodule-和-pure-是用来干嘛的" class="sidebar-link">webpack 打包后代码里的 __esModule 和 __PURE__ 是用来干嘛的</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#webpack-splitchunks-如何使用" class="sidebar-link">webpack splitChunks 如何使用</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/engineering.html#es6-的-async-await-编译为-es5-是什么样子" class="sidebar-link">ES6 的 async await 编译为 ES5 是什么样子</a></li></ul></li><li><a href="/Front-end-interview/browser.html" class="sidebar-link">浏览器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/browser.html#什么是同源政策有哪些限制" class="sidebar-link">什么是同源政策有哪些限制</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/browser.html#为什么浏览器的-js-线程和-ui-线程是互斥的" class="sidebar-link">为什么浏览器的 JS 线程和 UI 线程是互斥的？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/browser.html#跨域资源共享-cors" class="sidebar-link">跨域资源共享（CORS）</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/browser.html#在浏览器输入-url-回车之后发生了什么" class="sidebar-link">在浏览器输入 URL 回车之后发生了什么</a></li></ul></li><li><a href="/Front-end-interview/http.html" class="sidebar-link">HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#get-post-请求有什么区别" class="sidebar-link">GET/POST 请求有什么区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#一个-tcp-连接能发几个-http-请求" class="sidebar-link">一个 TCP 连接能发几个 HTTP 请求?</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#http-缓存" class="sidebar-link">HTTP 缓存</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#keep-alive-和多路复用的区别" class="sidebar-link">keep-alive 和多路复用的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#http-状态码" class="sidebar-link">HTTP 状态码</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#https加密过程详解" class="sidebar-link">HTTPS加密过程详解</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/http.html#域名解析流程" class="sidebar-link">域名解析流程</a></li></ul></li><li><a href="/Front-end-interview/node.html" class="sidebar-link">Node</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/node.html#package-json-依赖项版本号前面的-有什么用" class="sidebar-link">package.json 依赖项版本号前面的 ~ ^ 有什么用？</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/node.html#项目中使用-package-lock-json-锁版本问题" class="sidebar-link">项目中使用 package-lock.json 锁版本问题</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/node.html#peerdependencies-有什么用" class="sidebar-link">peerDependencies 有什么用</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/node.html#require-原理" class="sidebar-link">require 原理</a></li></ul></li><li><a href="/Front-end-interview/arithmetic.html" class="sidebar-link">算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#手写冒泡算法" class="sidebar-link">手写冒泡算法</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#根据-value-获取叶子节点" class="sidebar-link">根据 value 获取叶子节点</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#根据-value-获取叶子节点的路径" class="sidebar-link">根据 value 获取叶子节点的路径</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#列表结构转树结构" class="sidebar-link">列表结构转树结构</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#实现洗牌算法" class="sidebar-link">实现洗牌算法</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/arithmetic.html#二叉树遍历-前序、中序、后序、广度优先" class="sidebar-link">二叉树遍历(前序、中序、后序、广度优先)</a></li></ul></li><li><a href="/Front-end-interview/safe.html" class="sidebar-link">前端安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/safe.html#什么是-xss" class="sidebar-link">什么是 XSS</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/safe.html#什么是-csrf" class="sidebar-link">什么是 CSRF</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/safe.html#什么是-csp" class="sidebar-link">什么是 CSP</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/safe.html#cookie-的保护方式" class="sidebar-link">Cookie 的保护方式</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/safe.html#常见的编码和加密算法" class="sidebar-link">常见的编码和加密算法</a></li></ul></li><li><a href="/Front-end-interview/optimize.html" class="sidebar-link">前端优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#图片优化" class="sidebar-link">图片优化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#http请求" class="sidebar-link">HTTP请求</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#webpack-的优化" class="sidebar-link">webpack 的优化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#使用-cdn-加载静态资源" class="sidebar-link">使用 CDN 加载静态资源</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#合理放置-css-和-js-的位置" class="sidebar-link">合理放置 CSS 和 JS 的位置</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#使用缓存" class="sidebar-link">使用缓存</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#减少重绘和重排" class="sidebar-link">减少重绘和重排</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#使用事件委托" class="sidebar-link">使用事件委托</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#大量计算使用-web-workers" class="sidebar-link">大量计算使用 Web Workers</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#dns-prefetch-和-preconnect" class="sidebar-link">DNS-prefetch 和 Preconnect</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#preload-和-prefetch" class="sidebar-link">preload 和 prefetch</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#开启-gzip-压缩" class="sidebar-link">开启 gzip 压缩</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#vue-优化" class="sidebar-link">Vue 优化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#react-优化" class="sidebar-link">React 优化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#hybrid-app-下的性能优化" class="sidebar-link">Hybrid App 下的性能优化</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/optimize.html#首屏渲染白屏时间如何优化" class="sidebar-link">首屏渲染白屏时间如何优化</a></li></ul></li><li><a href="/Front-end-interview/other.html" class="sidebar-link">其他</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#单点登录" class="sidebar-link">单点登录</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#正则表达式" class="sidebar-link">正则表达式</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#ascii、gbk、utf、unicode" class="sidebar-link">Ascii、GBK、UTF、Unicode</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#git-merge-和-git-rebase区别" class="sidebar-link">git merge 和 git rebase区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#为什么引用值要放在堆中-而原始值要放在栈中" class="sidebar-link">为什么引用值要放在堆中，而原始值要放在栈中</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#nginx-常见配置" class="sidebar-link">Nginx 常见配置</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#mvc、mcp、mvvm-的区别" class="sidebar-link">MVC、MCP、MVVM 的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#观察者模式和发布订阅模式的区别" class="sidebar-link">观察者模式和发布订阅模式的区别</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#常见的缓存淘汰算法有哪些" class="sidebar-link">常见的缓存淘汰算法有哪些</a></li><li class="sidebar-sub-header"><a href="/Front-end-interview/other.html#依赖注入中如何解决循环依赖" class="sidebar-link">依赖注入中如何解决循环依赖</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="webpack-loader-的加载顺序"><a href="#webpack-loader-的加载顺序" class="header-anchor">#</a> webpack Loader 的加载顺序</h2> <p>webpack 的 Loader 加载是从右往左依次加载的，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.less$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至于为啥 Webpack 选择从右往左加载，只是 Webpack 选择了 compose（从右往左组合函数） 方式，而不是 pipe（从左向右组合函数） 的方式而已，在技术上实现从左往右也不会有难度。</p> <h2 id="webpack-中-hash、chunkhash、contenthash-有什么不同"><a href="#webpack-中-hash、chunkhash、contenthash-有什么不同" class="header-anchor">#</a> webpack 中 hash、chunkhash、contenthash 有什么不同？</h2> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h3> <p>hash 计算是跟整个项目的构建相关，只要在打包的过程中有一处变化了，就会生产一个新的 hash 值。不要在生产环境使用，因为修改一个文件后，所有的 chunk 的名称都变了，不利于缓存。</p> <h3 id="chunkhash"><a href="#chunkhash" class="header-anchor">#</a> chunkhash</h3> <p>chunkhash 是根据打包的 chunk（就是打包后的文件） 来生成对应的 hash 值。如果使用 chunkhash 作为文件名称，改变一个文件内容后，只有对应的 chunk 文件名称会改变，这样会比较好的利用缓存。但有一个问题，现代前端框架会把 js 和 css 放在一个文件里，比如像 vue 这些框架，我们一般会用一个插件叫 mini-css-extract-plugin，这样我们就能把 css 单独打包，但是这样就会产生一个问题，这样打包出来的 css 的 chunkhash 和 js 的 chunkhash 会是一样的，这样当我们 js 文件改变后，即使 css 文件内容没有改变，打包出来的 css 文件的 hash 值仍然会改变，不利于缓存。</p> <h3 id="contenthash"><a href="#contenthash" class="header-anchor">#</a> contenthash</h3> <p>contenthash 将根据资源内容创建出唯一 hash，也就是说文件内容不变，hash 就不变。我们将 css 文件的名称和 js 文件的名称与 contenthash 关联，就能解决上面 chunkhash 的问题。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>production<br>
只需要 contenthash 就可以了，修改哪个文件才改变哪个文件的 hash。其它的 hash 不变可以继续从缓存里读取，以加快访问速度。</li> <li>development<br>
不需要 hash 直接展示名称，毕竟生成 hash 也需要消耗一定资源，cache 还会影响开发体验。</li></ul> <p>参考资料：<a href="https://github.com/laihuamin/JS-total/issues/19" target="_blank" rel="noopener noreferrer">https://github.com/laihuamin/JS-total/issues/19<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="聊聊-webpack-的-tree-shaking"><a href="#聊聊-webpack-的-tree-shaking" class="header-anchor">#</a> 聊聊 webpack 的 tree-shaking</h2> <h3 id="开启步骤"><a href="#开启步骤" class="header-anchor">#</a> 开启步骤</h3> <ol><li>关闭 babel 的模块语法转换<br>
在 @babel/preset-env 配置中 modules 设置为 false，这样 babel 就不会将我们写的 es6 Module 的导入方式进行转换（tree-shaking 依赖 es6 的 Module 语法）</li> <li>设置 mode 为 production</li> <li>确保 usedExports 为 true（默认为 true）</li> <li>必要的情况下指定 sideEffects</li></ol> <h3 id="usedexports"><a href="#usedexports" class="header-anchor">#</a> usedExports</h3> <p>当 usedExports 的配置为 true 时，webpack 会去检测语法中的副作用，并会在压缩代码的时候删除：导入了但没有使用的无副作用的代码。此外在遇到 <code>/*#__PURE__*/</code> 注释时也会认为该标记代码是无副作用的。babel 转换 js 的时候，对于<strong>没有副作用</strong>的函数，会在它<strong>调用的地方</strong>会标记为 <code>/*#__PURE__*/</code>。</p> <h3 id="sideeffects"><a href="#sideeffects" class="header-anchor">#</a> sideEffects</h3> <p>虽然 usedExports 可以自动去除无副作用的代码，但是大部分代码 webpack 是没法判断是否有副作用的。所以 webpack 提供了 sideEffects 字段，通过手动指定 package.json 中的 sideEffects 来标记哪些代码有副作用，当为 false 时则认为所有代码都是无副作用的，则 webpack 会移除所有未使用的代码。需要注意的是 webpack 去打包你引入的包的时候会查看该包的 package.json 中的 sideEffects 字段，而非你自己项目里的 sideEffects。所以说自己项目配置的 sideEffects 只是指定你自己写的代码是否有副作用，最后 sideEffects 在不配置的情况下默认会认为你写的代码都是有副作用的（保守安全考虑）。</p> <h3 id="tree-shaking的常见误区"><a href="#tree-shaking的常见误区" class="header-anchor">#</a> tree shaking的常见误区</h3> <h4 id="包含副作用的代码-不能配置-sideeffects"><a href="#包含副作用的代码-不能配置-sideeffects" class="header-anchor">#</a> 包含副作用的代码，不能配置 sideEffects</h4> <p>sideEffects 实际和代码里是否具有副作用无关，而是该副作用设计是作用在模块内还是模块外，如 vue 代码，虽然有副作用，但是这些副作用是给 vue 的内部实现使用的，而非给外部用的，所以也可以配置 sideEffects 为 false。</p> <h4 id="为-css-配置-sideeffects-false"><a href="#为-css-配置-sideeffects-false" class="header-anchor">#</a> 为 css 配置 sideEffects: false</h4> <p>为了实现 css 的 tree shaking，想通过配置 css 的 sideEffects 来实现 css 的 tree shaking，结果导致业务直接 import css 的 css 没有打包进来，css 的 tree shaking 应该跟着相关组件走，如果改组件配置了sideEffects: false，当没引入改组件的时候，其 css 会自动跟随 tree shaking 掉。</p> <h3 id="tree-shaking问题排查方式"><a href="#tree-shaking问题排查方式" class="header-anchor">#</a> tree shaking问题排查方式</h3> <ol><li>确定是 DCE（去除死代码的术语，例如删除 tree shaking 阶段标记的 <code>/*#__PURE__*/</code> 代码，一般由压缩工具实现）问题还是 tree shaking 问题，根据代码出现在 top-level 还是非 top-level，我们能比较容易的区分是 tree shaking 失效还是 DCE 失效。如果是函数内的优化失败那么肯定是 DCE，如果是 top-level 的优化失效，则大概率是 tree shaking 失效(也可能是 DCE 失效，如 top level 的 constant folding)。</li> <li>如果是 DCE 失效，那么很可能是 terser|esbuild 的优化级别过低，或者 terser 没有开启某些优化，请检查 terser 相关配置参数，适当的调整 terser 的 <a href="https://github.com/terser/terser#compress-options" target="_blank" rel="noopener noreferrer">passes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 级别。</li> <li>如果是 tree shaking 失败，先确认失效模块的路径信息，很多编译工具编译中会保留模块信息(通常需要先关闭 minify，因为 minify 有时会删除掉模块信息)，如 esbuild。</li> <li>确认了模块路径信息，进一步确认该模块是否具有副作用以及是否为 esModule，有时候是否具有副作用难以判定，可以尝试配置该模块的路径的 sideEffects: false，然后对比配置前后的产物大小是否具有差异，不是所有的模块都应该配置 sideEffects，请先确保改模块是否具有模块内部副作用性质，避免影响了程序的正确性。</li> <li>如果配置了 sideEffects: false，大小仍然没有明显改变，此时存在两种可能：1. 该模块本身就不能 tree shaking，在其他地方存在着对该模块变量的引用，导致了该模块没被  shaking 掉，这一般通过编辑器的 go to reference 或者自己字符串搜索能查到引用的地方。2. 编译工具存在 bug，如不支持 sideEffects，或者 sideEffects 计算错误，请联系编译工具的开发进行协助排查。</li></ol> <h3 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h3> <ol><li>关闭 babel 的 modules 转换，以开启 tree-shaking</li> <li>生产环境指定 mode 为 production</li> <li>选取 package.json 中 sideEffects 为 false 的包，帮助 webpack tree-shaking</li> <li>在必要的情况下指定 package.json 中的 sideEffects 字段，用来标记有副作用的代码，帮助 webpack tree-shaking</li></ol> <p>参考链接：</p> <ul><li><a href="https://juejin.cn/post/6978648939012554765" target="_blank" rel="noopener noreferrer">Webpack 实现 Tree shaking 的前世今生<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/491391823" target="_blank" rel="noopener noreferrer">tree shaking问题排查指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/32831172" target="_blank" rel="noopener noreferrer">你的Tree-Shaking并没什么卵用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="webpack-的-sideeffects-字段应该怎么用"><a href="#webpack-的-sideeffects-字段应该怎么用" class="header-anchor">#</a> webpack 的 sideEffects 字段应该怎么用</h2> <p>当别人使用你开发的包时，webpack 能够使用 tree-shaking 的前提是你提供了 ESM 格式的代码（package.json 中提供了 module 字段，并且使用方采用 import 语法导入你的包），而 package.json 文件的 sideEffects 字段是用来标记哪些文件是 side-effect-free（无副作用）（注意，一旦标记为无副作用，并且使用方未使用你导出的变量，那么即使你代码中有副作用代码，webpack 也会 tree-shaking 掉），所以说只要你的包不是用来做 polyfill 或 shim 之类的事情，就尽管放心的给他加上。</p> <p>参考链接：<a href="https://zhuanlan.zhihu.com/p/40052192" target="_blank" rel="noopener noreferrer">Webpack 中的 sideEffects 到底该怎么用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="实现一个-webpack-loader-和-webpack-plugin"><a href="#实现一个-webpack-loader-和-webpack-plugin" class="header-anchor">#</a> 实现一个 webpack loader 和 webpack plugin</h2> <h3 id="loader-的实现"><a href="#loader-的实现" class="header-anchor">#</a> loader 的实现</h3> <p>loader 其实是一个函数，它的参数是匹配文件的源码，返回结果是处理后的源码。例如以下 loader 是将 var 关键词替换为 const：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">var</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'const'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>loader 还可以是异步的，如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// 由于有 3 秒延迟，所以打包时需要 3+ 秒的时间</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="plugin"><a href="#plugin" class="header-anchor">#</a> plugin</h3> <p>webpack 在整个编译周期中会触发很多不同的事件，plugin 可以监听这些事件，并且可以调用 webpack 的 API 对输出资源进行处理。这是它和 loader 的不同之处，loader 一般只能对源文件代码进行转换，而 plugin 可以做得更多。webpack 官网定义的插件由以下几个部分构成：</p> <ol><li>一个 JavaScript 命名函数。</li> <li>在插件函数的 prototype 上定义一个 apply 方法。</li> <li>指定一个绑定到 webpack 自身的事件钩子。</li> <li>处理 webpack 内部实例的特定数据。</li> <li>功能完成后调用 webpack 提供的回调。</li></ol> <p>简单的说，一个具有 apply 方法的函数就是一个插件，并且它要监听 webpack 的某个事件。下面来看一个简单的示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Plugin</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token class-name">Plugin</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 所有文件资源都被 loader 处理后触发这个事件</span>
  compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 功能完成后调用 webpack 提供的回调</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello World'</span><span class="token punctuation">)</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Plugin
</code></pre></div><p>关于 compilation 对象：</p> <blockquote><p>compilation 对象代表了一次资源版本构建。当运行 webpack 开发环境中间件时，每当检测到一个文件变化，就会创建一个新的 compilation，从而生成一组新的编译资源。一个 compilation 对象表现了当前的模块资源、编译生成资源、变化的文件、以及被跟踪依赖的状态信息。compilation 对象也提供了很多关键时机的回调，以供插件做自定义处理时选择使用。</p></blockquote> <p>参考链接：<a href="https://github.com/woai3c/Front-end-articles/issues/6" target="_blank" rel="noopener noreferrer">https://github.com/woai3c/Front-end-articles/issues/6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="webpack-打包后代码里的-esmodule-和-pure-是用来干嘛的"><a href="#webpack-打包后代码里的-esmodule-和-pure-是用来干嘛的" class="header-anchor">#</a> webpack 打包后代码里的 <code>__esModule</code> 和 <code>__PURE__</code> 是用来干嘛的</h2> <ol><li><code>__esModule</code><br> <code>__esModule</code> 是为了解决 CJS 和 ESM 互转的问题，标记该代码是由 ESM 打包成 CJS 的，详见：<a href="https://github.com/NameWjp/blog/issues/54" target="_blank" rel="noopener noreferrer">CJS和ESM的来龙去脉<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>__PURE__</code><br>
babel 的转换或 webpack 的 tree-shaking 过程中会使用 <code>__PURE__</code> 标记没有副作的代码（目前只支持在调用的地方标记），在后续的压缩中会忽略：导入但没使用，并且标记为 <code>__PURE__</code> 的代码，当然也可以手动添加 <code>__PURE__</code> 注解，详见：<a href="#%E8%81%8A%E8%81%8A-webpack-%E7%9A%84-tree-shaking">聊聊 webpack 的 tree-shaking</a>  。未来可能支持 <code>__NO_SIDE_EFFECTS__</code> 来在函数定义的地方标记其无副作用，详见：<a href="https://github.com/rollup/rollup/pull/5024" target="_blank" rel="noopener noreferrer">feat: support <code>#__NO_SIDE_EFFECTS__</code> annotation for function declaration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="webpack-splitchunks-如何使用"><a href="#webpack-splitchunks-如何使用" class="header-anchor">#</a> webpack splitChunks 如何使用</h2> <p>splitChunks 是 webpack 用来分包的一个配置，主要有下面一些重要的字段</p> <h3 id="chunks"><a href="#chunks" class="header-anchor">#</a> chunks</h3> <p>splitChunks.chunks 的作用是指示采用什么样的方式来优化分离 chunks，常用的有三种常用的取值：async、initial 和 all，async 是默认值。</p> <h4 id="async"><a href="#async" class="header-anchor">#</a> async</h4> <p>chunks: 'async' 的意思是只选择通过 import() 异步加载的模块来分离 chunks。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in c.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打包结果如下：
<img src="/Front-end-interview/assets/img/engineering_1.2bf3827b.jpg" alt=""></p> <h4 id="initial"><a href="#initial" class="header-anchor">#</a> initial</h4> <p>chunks: 'initial' 表示同步导入的模块也会被分离，但是一个模块同时被同步导入，同时被异步导入，则不能复用。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m3'</span><span class="token punctuation">;</span> <span class="token comment">// 新加的。</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新加的。</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in c.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打包结果如下：
<img src="/Front-end-interview/assets/img/engineering_2.4c57c3b7.jpg" alt=""></p> <h4 id="all"><a href="#all" class="header-anchor">#</a> all</h4> <p>chunks: 'all' 表示同步和异步代码都复用。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m3'</span><span class="token punctuation">;</span> <span class="token comment">// 新加的。</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 新加的。</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c.js</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./utils/m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./utils/m2'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some code in c.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>打包结果如下：
<img src="/Front-end-interview/assets/img/engineering_3.6a7457df.jpg" alt=""></p> <h3 id="cachegroups"><a href="#cachegroups" class="header-anchor">#</a> cacheGroups</h3> <p>通过 cacheGroups，可以自定义 chunk 输出分组。设置 test 对模块进行过滤，符合条件的模块分配到相同的组。splitChunks 默认情况下有如下分组：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      cacheGroups<span class="token operator">:</span> <span class="token punctuation">{</span>
        defaultVendors<span class="token operator">:</span> <span class="token punctuation">{</span>
          test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 缓存组的规则</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 缓存优先级</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否复用已存在的块</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token comment">// 拆分前必须共享模块的最小 chunks 数，默认 1</span>
          priority<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>参考：<a href="https://juejin.cn/post/7118953143475372039" target="_blank" rel="noopener noreferrer">关于 splitChunks 的几个重点属性解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="es6-的-async-await-编译为-es5-是什么样子"><a href="#es6-的-async-await-编译为-es5-是什么样子" class="header-anchor">#</a> ES6 的 async await 编译为 ES5 是什么样子</h2> <p>首先 async 和 await 是由 Generator 和一个“自执行”的函数来实现的，babel 实现了 Generator 和一个“自执行函数”。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// es6 代码</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// es5 代码</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">_test</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * _asyncToGenerator 是 babel 实现的一个自执行函数，用于启动 Generator
   * _regeneratorRuntime 是 babel 用 es5 实现的 Generator
   */</span>
  _test <span class="token operator">=</span> <span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span> <span class="token comment">/*#__PURE__*/</span><span class="token function">_regeneratorRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mark</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">_callee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">_regeneratorRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">_callee$</span><span class="token punctuation">(</span><span class="token parameter">_context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">switch</span> <span class="token punctuation">(</span>_context<span class="token punctuation">.</span>prev <span class="token operator">=</span> _context<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          _context<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
        <span class="token keyword">case</span> <span class="token string">&quot;end&quot;</span><span class="token operator">:</span>
          <span class="token keyword">return</span> _context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> _callee<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">_test</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>下面是一个非常简化的 _regeneratorRuntime 实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_simpleRegeneratorRuntime</span><span class="token punctuation">(</span><span class="token parameter">mark</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 生成器的内部状态</span>
  <span class="token keyword">let</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 生成器是否完成</span>
  <span class="token keyword">let</span> value<span class="token punctuation">;</span> <span class="token comment">// 当前传递的值</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
          value <span class="token operator">=</span> val<span class="token punctuation">;</span> <span class="token comment">// 接收传入的值（如果有的话）</span>
          state <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 更新状态</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token function">mark</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
          done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 标记生成器已完成</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">default</span><span class="token operator">:</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> done<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 一个简单的 generator 函数的例子</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">myGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
  <span class="token keyword">yield</span> <span class="token string">'World'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 会被编译成如下代码</span>
<span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">_simpleRegeneratorRuntime</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
      <span class="token keyword">return</span> <span class="token string">'World'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用简易的 _regeneratorRuntime</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 'Hello', done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: 'World', done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Front-end-interview/react.html" class="prev">
        React
      </a></span> <span class="next"><a href="/Front-end-interview/browser.html">
        浏览器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Front-end-interview/assets/js/app.fdae9a04.js" defer></script><script src="/Front-end-interview/assets/js/2.2ef4b7ab.js" defer></script><script src="/Front-end-interview/assets/js/8.083d3bab.js" defer></script>
  </body>
</html>
